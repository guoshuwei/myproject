(function(e){function t(e){s.os={},s.os.webkit=e.match(/WebKit\/([\d.]+)/)?!0:!1,s.os.android=e.match(/(Android)\s+([\d.]+)/)||e.match(/Silk-Accelerated/)?!0:!1,s.os.ipad=e.match(/(iPad).*OS\s([\d_]+)/)?!0:!1,s.os.iphone=!s.os.ipad&&e.match(/(iPhone\sOS)\s([\d_]+)/)?!0:!1,s.os.webos=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/)?!0:!1,s.os.touchpad=s.os.webos&&e.match(/TouchPad/)?!0:!1,s.os.ios=s.os.ipad||s.os.iphone,s.os.blackberry=e.match(/BlackBerry/)||e.match(/PlayBook/)?!0:!1,s.os.opera=e.match(/Opera Mobi/)?!0:!1,s.os.fennec=e.match(/fennec/i)?!0:!1,s.os.desktop=!(s.os.ios||s.os.android||s.os.blackberry||s.os.opera||s.os.fennec)}var n="mt",r="1.0.0",i=[],o=i.slice,a=function(){},s=e[n];s&&s.version>=r||(window.console===void 0&&(window.console={log:a,warn:a,error:a}),s=e.mt={version:r,isFunction:function(e){return"function"==typeof e},isObject:function(e){return"object"==typeof e},isNumber:function(e){return"[object Number]"==Object.prototype.toString.call(e)&&isFinite(e)},isArray:function(e){return e instanceof Array&&void 0!=e.push},extend:function(e){if(void 0==e&&(e=this),1===arguments.length){for(var t in e)this[t]=e[t];return this}return o.call(arguments,1).forEach(function(t){for(var n in t)e[n]=t[n]}),e},each:function(e,t){var n,r;if(s.isArray(e)){for(n=0;e.length>n;n++)if(t(n,e[n])===!1)return e}else if(s.isObject(e))for(r in e)if(e.hasOwnProperty(r)&&t(r,e[r])===!1)return e;return e},buildQuery:function(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=t?t+"["+r+"]":r,o=e[r];n.push(s.isObject(o)?s.buildQuery(o,i):i+"="+encodeURIComponent(o))}return n.join("&")},parseUrl:function(e){for(var t,n,r,i,o=e.split("&"),a=o.length,u={},l=0;a>l;l++)o[l]&&(i=o[l].split("="),t=i[0],n=decodeURIComponent(i[1]),r=u[t],r===void 0?u[t]=n:s.isArray(r)?r.push(n):u[t]=[r,n]);return u},getQuery:function(e,t){var n=RegExp("(^|&|\\?|#)"+t+"=([^&#]*)(&|$|#)",""),r=e.match(n);return r?decodeURIComponent(r[2]):null},uuid:function(){var e=function(){return(0|65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+e()}},t(navigator.userAgent))})(window),function(e){function t(e){this.NAMESPACE=e}var n={},r=Array.prototype.slice,i=t.prototype;i.add=i.addEvent=i.addEventListener=function(e,t){if(t){var r=this.NAMESPACE,i=n[r].evs;return i[e]?i[e].push(t):i[e]=[t],this}},i.fire=function(e){var t=r.call(arguments,1),i=this.NAMESPACE,o=n[i].evs[e],a=n[i].once[e];return o&&o.forEach(function(e){e.apply(e,t)}),a&&a.forEach(function(e){e.apply(e,t)}),n[i].once[e]=null,this},i.once=function(e,t){if(t){var r=this.NAMESPACE,i=n[r].once;return i[e]?i[e].push(t):i[e]=[t],this}},e.Event=function(e){var r=n[e];return r||(r=n[e]={cons:new t(e),evs:{},once:{}}),r.cons}}(mt),function(){function e(){this.id=mt.uuid(),this.__event__=mt.Event("class.event."+this.id)}function t(e,t){for(var n in t)e[n]=t[n]}var n=mt.Event("class");e.prototype.fire=function(){this.__event__.fire.apply(this.__event__,arguments)},e.prototype.addEventListener=function(){this.__event__.addEventListener.apply(this.__event__,arguments)},e.prototype.dispatchGlobalMessage=function(){n.fire.apply(n,arguments)},e.prototype.listenGlobalMessage=function(){n.addEventListener.apply(n,arguments)},mt.createClass=function(n,r){"object"==typeof n&&(r=n);var i=function(){};i.prototype=e.prototype;var o=function(){e.call(this),n.apply(this,arguments)},a=o.prototype=new i;return a.extend=function(e){t.call(this,this,e)},r&&t.call(o,a,r),o}}(),function(){var e,t,n=mt.Event("__AppUrlHash__"),r={listen:function(e){return e?(n.add("change",e),r):void 0},start:function(){t||(t=!0,e=document.location.hash,n.fire("change",e))}};mt.history=r,window.addEventListener("hashchange",function(){var t=document.location.hash.trim();t!==e&&(e=t,n.fire("change",e))},!1)}(),function(){function e(e,t){for(var n,r,i=1,o=e.length,a=[];o>i;i+=1)n=e[i].split(":"),2===n.length&&(r=n[1],a.push(n[0]),t=t.replace("<"+e[i]+">","("+r+")"));return{route:t,params:a}}var t=mt.createClass(function(e){e=e||{};var t=this,n={action:{},controller:{},routeConfig:{},routeRegConfig:{},"status.runing":!1};t.addEventListener("addAction",function(e,t){n.action[e]=t}),t.addEventListener("addController",function(e,t){n.controller[e]=t}),t.addEventListener("Action.change",function(e,n){t.analyticRoute(t.getRoute(e,n))}),t.addEventListener("error",function(e,n,r,i){t.fire("error."+e,{errorno:e,action:n,msg:r,detail:i})}),t.get=function(e){return n[e]},e.route&&(this.addRoute(e.route),delete e.route,mt.extend(t,e))},{routeSep:"/",hashStart:"#",defaultController:"site",defaultAction:"index",history:[],isFirstAction:!0,run:function(e){var t=this.get("status.runing");t||(this.fire("run"),t=!0),e&&mt.isFunction(e)&&e.apply(this)},isBackAction:function(e){var t,n=self.history.length;return 0>=n?!1:(t=self.history[n-2],t===e)},addAction:function(e,t){this.fire("addAction",e,t)},addController:function(e,t){this.fire("addController",e,t)},addRoute:function(t,n){var r=this.get("routeRegConfig"),i=this.get("routeConfig"),o=function(t,n){var o=/<([^>]+)>/g.exec(t);if(o&&o[1]){var a=e(o,t);r[a.route]={route:n,params:a.params}}else i[t]=n};if("object"==typeof t)for(var a in t)o(a,t[a]);else n&&o(t,n);return this},analyticRoute:function(e){var t,n,r=this,i=e.route.split(r.routeSep),o=i[0],a=r.get("controller"),s=a[o],u=i[1]?r.routeSep+i[1]:null,l=o+(u?u:""),c=r.get("action"),f=!0;if(r.history.length>0&&(r.from=r.history[r.history.length-1]),r.isBackAction(l)&&(t=!0),r.fire("action.start",l),r.beforeAction&&mt.isFunction(r.beforeAction)&&(f=r.beforeAction.apply(r,[e.params,r])),f!==!1)if(s)if(u||(u=r.defaultAction),s[u+"Action"]&&mt.isFunction(s[u+"Action"]))try{s.beforeAction&&mt.isFunction(s.beforeAction)&&(f=s.beforeAction.apply(r,[e.params,r])),f!==!1?(f=s[u+"Action"].apply(r,[e.params,r]),f!==!1?s.afterAction&&mt.isFunction(s.afterAction)&&s.afterAction.apply(r,[e.params,r]):r.fire("action.stop",l)):r.fire("action.stop",o+r.routeSep+"beforeAction",o),r.fire("action.complete",l)}catch(p){r.fire("error",500,l,"action has some error.",p)}else r.fire("error",404,l,"not found action.");else if(n=c[l])try{n.apply(r,[e.params,r]),r.fire("action.complete",l)}catch(p){r.fire("error",500,l,"action has some error.",p)}else r.fire("error",404,l,"not found action.");else r.fire("action.stop","beforeAction");r.isFirstAction&&(r.fire("ready",r),delete r.isFirstAction),t?r.history.pop():r.history.push(l)},addErrorHandle:function(e,t){this.addEventListener("error."+e,t)},getRoute:function(e,t){if(e=e.replace(this.hashStart,""),""==e&&(e=this.defaultController),e){var n,r,i,o=e.split("?"),a=o[0],s=t||{},u=this.get("routeRegConfig"),l=this.get("routeConfig");if(o[1]&&!t&&(s=mt.parseUrl(o[1])),l[a])n=l[a];else{for(var c in u)if(r=RegExp(c),i=r.exec(a)){n=u[c].route;var f,p=u[c].params,d=0;if(p)for(f=p.length;f>d;d+=1)s[p[d]]=i[d+1];break}n||(n=a)}return{route:n,params:s}}}});mt.createApp=function(e){return new t(e)}}(),function(api){function collapse(e){for(var t,n=e.split("/"),r=[],i=0;n.length>i;++i)t=n[i],"."!==t&&(".."===t&&r.length>0?r.pop():r.push(t));return r.join("/")}function dir(e){var t=e.lastIndexOf("/");return t>=0?e.substring(0,t+1):""}function resolve(e,t){if("string"!=typeof e)return"";e=e.trim();var n=e.charAt(0);return"."===n&&(e=(t||"")+e),e=collapse(e)}function loadMod(id){var ret,getEng,prevId=id;return _maps[id]&&(id=_maps[id]),/\.js\??.*$/.test(id)||(id+=".js"),id=resolve(id),$noCache&&(id+="?r="+(new Date).getTime()),api.ajax&&(getEng=api.ajax),"undefined"!=typeof $&&$.ajax!==void 0&&(getEng=$.ajax),getEng({url:baseUri+id,async:!1,timeout:2e3,error:function(e){console.error('Load module "'+prevId+'" Error:'+"(code:"+e.status+",msg:"+e.statusText+")")},success:function(res){if(res){var dep=[],resTxt=res,i,path=dir(id),modStr,trueId;for(require_reg.lastIndex=0;m=require_reg.exec(resTxt);)m[1]&&dep.push(m);if(dep.length>0)for(i=0;dep.length>i;i++)tureId=resolve(path+collapse(dep[i][1].replace(/['"]/g,""))),resTxt=resTxt.replace(dep[i][0],'=require("'+tureId+'")');id=id.replace(/\.js\??.*$/,""),modStr='define("'+id+'",function(require,exports,mod){'+resTxt+"})";try{eval(modStr),ret=Module(id)}catch(e){console.warn('Parse module "'+id+'" error:'),console.error(e)}}}}),ret}var version="1.0.0",Module=function(){return 2==arguments.length?define.apply(define,arguments):require.apply(require,arguments)},$async_off,$noCache,require_reg=/\/\/.*|\/\*[\s\S]*?\*\/|"(?:\\[\s\S]|[^"\\])*"|'(?:\\[\s\S]|[^'\\])*'|[;=(,:!^]\s*\/(?:\\.|[^\/\\])+\/|(?:^|\W)\s*require\s*\(\s*("[^"\\]*"|'[^'\\]*')\s*\)/g,baseUri=document.location.pathname,_maps={},blankFn=function(){},_modules={},_slice=Array.prototype.slice,define=function(e,t,n){if(""!==e){if(_maps[e]&&(e=_maps[e]),_modules[e]&&!n)throw"Module "+e+" already exist!";_modules[e]=mt.isFunction(t)?{id:e,fn:t,exports:{}}:{exports:t}}},require=function(e){var t,n,r=_modules[e];return r?(t=r.fn,t&&(n="function"==typeof t?t(require,r.exports,r):t,n&&(r.exports=n),delete r.fn),r.exports):$async_off?void 0:loadMod(e)};(function initMod(){var e,t=document.getElementsByTagName("script"),n=t.length,r=t[n-1],i=r.getAttribute("src"),o=1*mt.getQuery(i,"noCache"),a=mt.getQuery(i,"async");o&&($noCache=o),a&&0==a&&($async_off=!0),e=mt.getQuery(i,"baseUri")||mt.getQuery(i,"b"),e&&(baseUri=e)})(),Module.setBaseUri=function(e){baseUri=e},Module.setMap=function(e,t){if("object"==typeof e)for(var n in e)_maps[n]=e[n];else"string"==typeof e&&t&&(_maps[e]=t)},api.module=Module,window.require||(window.require=require)}(mt),function(){var e=mt.template={},t={},n={},r={},i="".trim;e.openTag="<%",e.closeTag="%>",e.render=function(e,t,n){var r=a(e,n);return void 0===r?s({id:e,name:"Render Error",message:"Not Cache"}):r(t)},e.compile=function(r,i){function a(t){try{return l.call(n,t)}catch(o){return u?(o.id=r||i,o.name="Render Error",o.source=i,s(o)):e.compile(r,i,!0)(t)}}var u=arguments[2];"string"!=typeof i&&(u=i,i=r,r=null);try{var l=o(i,u)}catch(c){return c.id=r||i,c.name="Syntax Error",s(c)}return a.toString=function(){return""+l},r&&(t[r]=a),a},e.helper=function(e,t){return void 0===t?n[e]:(n[e]=t,void 0)},e.plugin=function(e,t){return void 0===t?r[e]:(r[e]=t,void 0)};var o=function(t,r){function o(e){return m+=e.split(/\n/).length-1,e=e.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),e=b[1]+"'"+e+"'"+b[2],e+"\n"}function a(e){var t=m;if(d?e=d(e):r&&(e=e.replace(/\n/g,function(){return m++,"$line="+m+";"})),0===e.indexOf("=")){var n,o,a,u=e.substring(1).replace(/[\s;]*$/,""),l=u.split("|"),c=1,f=l.length;if(f){for(u=l[0];f>c;c++)o=l[c].split(":"),fn=o[0],n=o.slice(1),n.unshift(u),n.unshift('"'+fn+'"'),u="$plugins("+n.join(",")+")";a=u}else a=u;e=b[1]+(i?"$getValue(":"")+a+(i?")":"")+b[2]}return r&&(e="$line="+t+";"+e),s(e),e+"\n"}function s(e){e=e.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,""),u.call(e.split(/[^\$\w\d]+/),function(e){if(/^(this|\$helpers)$/.test(e))throw{message:'Prohibit the use of the "'+e+'"'};!e||l[e]||/^\d/.test(e)||y[e]||(c(e),y[e]=!0)})}function c(e){var t;t="include"===e?x:n[e]?"$helpers."+e:"$data."+e,v+=e+"="+t+","}var f=e.openTag,p=e.closeTag,d=e.parser,h=t,g="",m=1,y={$out:!0,$line:!0},v="var $helpers=this,"+(r?"$line=0,":""),b=i?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],x="function(id,data){if(data===undefined){data=$data}return $helpers.$render(id,data)}";u.call(h.split(f),function(e){e=e.split(p);var t=e[0],n=e[1];1===e.length?g+=o(t):(g+=a(t),n&&(g+=o(n)))}),h=g,r&&(h="try{"+h+"}catch(e){"+"e.line=$line;"+"throw e"+"}"),h=v+b[0]+h+"return "+b[3];try{return Function("$data",h)}catch(w){throw w.temp="function anonymous($data) {"+h+"}",w}},a=function(n,r){var i=t[n];if(void 0===i){var o=document.getElementById(n);return o&&e.compile(n,o.value||o.innerHTML,r),t[n]}return i},s=function(e){function t(){return t+""}var n="[template]:\n"+e.id+"\n\n[name]:\n"+e.name;return e.message&&(n+="\n\n[message]:\n"+e.message),e.line&&(n+="\n\n[line]:\n"+e.line,n+="\n\n[source]:\n"+e.source.split(/\n/)[e.line-1].replace(/^[\s\t]+/,"")),e.temp&&(n+="\n\n[temp]:\n"+e.temp),window.console&&console.error(n),t.toString=function(){return"{Template Error}"},t},u=Array.prototype.forEach||function(e,t){for(var n=this.length>>>0,r=0;n>r;r++)r in this&&e.call(t,this[r],r,this)},l={};u.call("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),function(e){l[e]=!0}),e.helper("$forEach",u),e.helper("$render",e.render),e.helper("$getValue",function(e){return void 0===e?"":e}),e.helper("$plugins",function(){var e=Array.prototype.slice.call(arguments,0),t=e[0];return r[t]?r[t].apply(this,e.slice(1)):void 0}),e.plugin("truncate",function(e,t,n){return n=n||"...",e.length>t?e.substring(0,t)+n:e});var c={'"':"quot","<":"lt",">":"gt","&":"amp"," ":"nbsp"};e.plugin("encode",function(e,t){return"html"===t?(e+"").replace(/["<>& ]/g,function(e){return"&"+c[e]+";"}):"url"===t?encodeURIComponent(e+""):e}),e.plugin("decode",function(e,t){return"html"===t?(e+"").replace(/["<>& ]/g,function(e){return"&"+c[e]+";"}):"url"===t?decodeURIComponent(e+""):e}),e.plugin("replace",function(e,t,n){return e.replace(t,n)}),e.plugin("default",function(e,t){return""===e?t:e})}(),function(){jQuery.cookie=function(e,t,n){if(void 0===t){var r=null;if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),o=0;i.length>o;o++){var a=jQuery.trim(i[o]);if(a.substring(0,e.length+1)==e+"="){r=decodeURIComponent(a.substring(e.length+1));break}}return r}n=n||{},null===t&&(t="",n.expires=-1);var s="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var u;"number"==typeof n.expires?(u=new Date,u.setTime(u.getTime()+1e3*60*60*24*n.expires)):u=n.expires,s="; expires="+u.toUTCString()}var l=n.path?"; path="+n.path:"",c=n.domain?"; domain="+n.domain:"",f=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),s,l,c,f].join("")}}();