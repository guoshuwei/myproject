(function(c){c.fn.Chart=function(e){var f=c.extend({},c.fn.Chart.defaults,e);var d=c(f.chartElement);$this=c(this);var g=c("<div class='"+f.chartClass+"'/>");if($this.is("ul")){b($this.find("li:first"),g,0,f)}else{if($this.is("li")){b($this,g,0,f)}}d.append(g)};c.fn.Chart.defaults={chartElement:"body",depth:-1,chartClass:"ui-chart"};var a=0;function b(g,p,f,e){var s=c("<table cellpadding='0' cellspacing='0' border='0'/>");var l=c("<tbody/>");var k=c("<tr/>").addClass("node-cells");var i=c("<td/>").addClass("node-cell").attr("colspan",2);var n=g.children("ul:first").children("li");var m;if(n.length>1){i.attr("colspan",n.length*2)}var r=g.clone().children("ul,li").remove().end().html();a++;g.data("tree-node",a);m=c("<div>").addClass("node").data("tree-node",a).append(r);if(n.length>0){m.addClass("group").click(function(){var u=c(this);var t=u.closest("tr");if(t.hasClass("contracted")){t.removeClass("contracted").addClass("expanded");t.nextAll("tr").css("display","");g.removeClass("collapsed")}else{t.removeClass("expanded").addClass("contracted");t.nextAll("tr").css("display","none");g.addClass("collapsed")}})}i.append(m);k.append(i);l.append(k);if(n.length>0){if(e.depth==-1||(f+1<e.depth)){var q=c("<tr/>");var j=c("<td/>").attr("colspan",n.length*2);q.append(j);$downLine=c("<div></div>").addClass("line down");j.append($downLine);l.append(q);var h=c("<tr/>");n.each(function(){var u=c("<td>&nbsp;</td>").addClass("line left top");var t=c("<td>&nbsp;</td>").addClass("line right top");h.append(u).append(t)});h.find("td:first").removeClass("top").end().find("td:last").removeClass("top");l.append(h);var d=c("<tr/>");n.each(function(){var t=c("<td class='node-container'/>");t.attr("colspan",2);b(c(this),t,f+1,e);d.append(t)})}l.append(d)}if(g.attr("class")!=undefined){var o=g.attr("class").split(/\s+/);c.each(o,function(t,u){if(u=="collapsed"){k.nextAll("tr").css("visibility","hidden");k.removeClass("expanded");k.addClass("contracted");m.css("cursor","s-resize")}else{m.addClass(u)}})}s.append(l);p.append(s);m.children("a").click(function(t){t.stopPropagation()})}})(jQuery);